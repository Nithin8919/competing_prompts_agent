{% extends "base.html" %}

{% block title %}Analysis Results - CTA Focus Analyzer{% endblock %}

{% block content %}
<div class="fade-in">
    <!-- Header -->
    <div class="results-header mb-5">
        <div class="header-content">
            <div class="header-main">
                <h2 class="results-title">
                    <i class="fas fa-chart-line me-3"></i>
                    Analysis Complete
                </h2>
                <div class="results-meta">
                    <span class="meta-item">
                        <i class="fas fa-bullseye me-1"></i>
                        {{ data.total_ctas }} CTAs Found
                    </span>
                    <span class="meta-divider">•</span>
                    <span class="meta-item">
                        <i class="fas fa-clock me-1"></i>
                        {{ data.processing_time }}s
                    </span>
                    <span class="meta-divider">•</span>
                    <span class="meta-item">
                        <i class="fas fa-expand-arrows-alt me-1"></i>
                        {{ data.image_dims }}
                    </span>
                    <span class="meta-divider">•</span>
                    <span class="meta-item">
                        <i class="fas fa-{{ 'link' if data.design_source == 'URL' else 'upload' }} me-1"></i>
                        {{ data.design_source }}
                    </span>
                </div>
            </div>
            
            <div class="header-actions">
                <a href="/" class="btn btn-primary">
                    <i class="fas fa-plus me-2"></i>
                    New Analysis
                </a>
            </div>
        </div>
    </div>
        
    <!-- Desired Behavior Section -->
    <div class="desired-behavior-card mt-4">
        <div class="behavior-header">
            <h5 class="behavior-title">
                <i class="fas fa-target me-2"></i>
                Your Goal
            </h5>
        </div>
        <div class="behavior-content">
            <p class="behavior-text">{{ data.desired_behavior }}</p>
        </div>
    </div>

    <!-- Competing Prompts Analysis -->
    {% if data.results.competing_prompts.total_competing > 0 %}
    <div class="competing-prompts-section mb-5">
        <div class="alert-competing">
            <div class="alert-header">
                <h4 class="alert-title">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Competing Prompts Analysis
                </h4>
                <span class="conflict-badge conflict-{{ data.results.competing_prompts.conflict_level }}">
                    {{ data.results.competing_prompts.conflict_level.title() }} Risk
                </span>
            </div>
            
            <!-- Quick Summary -->
            <div class="conflict-summary">
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-number">{{ data.results.competing_prompts.total_competing }}</div>
                        <div class="summary-label">Conflicts Found</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-number">{{ data.results.competing_prompts.high_attention_count or 0 }}</div>
                        <div class="summary-label">High-Attention CTAs</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-number conflict-{{ data.results.competing_prompts.conflict_level }}">
                            {{ data.results.competing_prompts.conflict_level.title() }}
                        </div>
                        <div class="summary-label">Risk Level</div>
                    </div>
                </div>
            </div>
            
            <div class="alert-content">
                <!-- Issues Section -->
                <div class="issues-section mb-4">
                    <h5 class="section-title">
                        <i class="fas fa-bug me-2"></i>
                        Identified Issues
                    </h5>
                    <div class="issues-list">
                        {% for conflict in data.results.competing_prompts.primary_conflicts %}
                        <div class="issue-card">
                            <div class="issue-header">
                                <div class="issue-icon">
                                    {% if conflict.severity == 'critical' %}
                                        <i class="fas fa-exclamation-triangle text-danger"></i>
                                    {% elif conflict.severity == 'high' %}
                                        <i class="fas fa-times-circle text-danger"></i>
                                    {% elif conflict.severity == 'medium' %}
                                        <i class="fas fa-exclamation-circle text-warning"></i>
                                    {% else %}
                                        <i class="fas fa-info-circle text-info"></i>
                                    {% endif %}
                                </div>
                                <div class="issue-content">
                                    <div class="issue-title">{{ conflict.title or conflict.type.replace('_', ' ').title() }}</div>
                                    <div class="issue-description">{{ conflict.description }}</div>
                                    {% if conflict.user_impact %}
                                    <div class="issue-impact">
                                        <strong>User Impact:</strong> {{ conflict.user_impact }}
                                    </div>
                                    {% endif %}
                                    {% if conflict.conversion_impact %}
                                    <div class="issue-conversion">
                                        <strong>Conversion Impact:</strong> {{ conflict.conversion_impact }}
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="severity-indicator severity-{{ conflict.severity }}">
                                    {{ conflict.severity.title() }}
                                </div>
                            </div>
                            
                            {% if conflict.ctas %}
                            <div class="affected-ctas">
                                <div class="ctas-label">Affected CTAs:</div>
                                <div class="ctas-grid">
                                    {% for cta in conflict.ctas %}
                                    <div class="cta-item">
                                        <div class="cta-text">"{{ cta.extracted_text }}"</div>
                                        <div class="cta-score">Score: {{ cta.score }}%</div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- Action Plan Section -->
                <div class="action-plan-section">
                    <h5 class="section-title">
                        <i class="fas fa-clipboard-list me-2"></i>
                        Action Plan
                    </h5>
                    <div class="action-items">
                        {% for recommendation in data.results.competing_prompts.recommendations %}
                        <div class="action-item enhanced">
                            <div class="action-number">{{ loop.index }}</div>
                            <div class="action-content">
                                <div class="action-text">
                                    {% if recommendation is mapping %}
                                        {{ recommendation.action }}
                                    {% else %}
                                        {{ recommendation }}
                                    {% endif %}
                                </div>
                                {% if recommendation is mapping %}
                                    {% if recommendation.rationale %}
                                    <div class="action-rationale">
                                        <strong>Why:</strong> {{ recommendation.rationale }}
                                    </div>
                                    {% endif %}
                                    {% if recommendation.implementation %}
                                    <div class="action-implementation">
                                        <strong>How:</strong> {{ recommendation.implementation }}
                                    </div>
                                    {% endif %}
                                {% endif %}
                            </div>
                            <div class="action-priority">
                                {% if recommendation is mapping and recommendation.priority %}
                                    <span class="priority-{{ recommendation.priority }}">{{ recommendation.priority.title() }} Priority</span>
                                {% elif loop.index <= 2 %}
                                    <span class="priority-high">High Priority</span>
                                {% else %}
                                    <span class="priority-medium">Medium Priority</span>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <!-- No Conflicts Found -->
    <div class="no-conflicts-section mb-5">
        <div class="alert-success">
            <div class="success-header">
                <h4 class="success-title">
                    <i class="fas fa-check-circle me-2"></i>
                    No Major Conflicts Detected
                </h4>
            </div>
            <p class="success-description">
                Your design appears to have well-organized CTAs without major competing prompts. 
                Consider testing different placements and messaging to optimize conversions further.
            </p>
        </div>
    </div>
    {% endif %}

    <div class="row g-4">
        <!-- Image Display -->
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0 text-white">
                        <i class="fas fa-image me-2"></i>
                        {{ data.filename }}
                    </h5>
                </div>
                <div class="card-body p-0">
                    <div class="text-center">
                        <img src="data:image/jpeg;base64,{{ data.image_data }}" 
                             alt="Analysis Image" 
                             class="w-100 h-auto">
                    </div>
                </div>
                <div class="card-footer bg-dark">
                    <div class="row text-center">
                        <div class="col-4">
                            <div class="text-muted small">Dimensions</div>
                            <div class="fw-semibold">{{ data.image_dims }}</div>
                        </div>
                        <div class="col-4">
                            <div class="text-muted small">Processing Time</div>
                            <div class="fw-semibold">{{ data.processing_time }}s</div>
                        </div>
                        <div class="col-4">
                            <div class="text-muted small">Elements Found</div>
                            <div class="fw-semibold">{{ data.total_ctas }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTAs List and Summary -->
        <div class="col-lg-4">
            <!-- CTAs List -->
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title mb-0 text-white">
                        <i class="fas fa-bullseye me-2"></i>
                        Detected CTAs
                    </h5>
                </div>
                <div class="card-body">
                    {% if data.results.ctas %}
                        <div class="cta-list" style="max-height: 400px; overflow-y: auto;">
                            {% for cta in data.results.ctas %}
                            <div class="cta-item p-3 mb-3 rounded border" 
                                 style="border-color: var(--dark-surface-light) !important; background: rgba(30, 41, 59, 0.5);">
                                
                                <div class="d-flex justify-content-between items-start mb-2">
                                    <div class="cta-info">
                                        <h6 class="mb-0 fw-semibold">{{ cta.extracted_text }}</h6>
                                        {% if cta.extracted_text %}
                                        <div class="extracted-text">
                                            <i class="fas fa-quote-left me-1"></i>
                                            <span class="text-extracted">"{{ cta.extracted_text }}"</span>
                                        </div>
                                        {% endif %}
                                    </div>
                                    <span class="badge fs-6 fw-bold
                                        {% if cta.score >= 70 %}bg-success
                                        {% elif cta.score >= 40 %}bg-warning
                                        {% else %}bg-danger{% endif %}">
                                        {{ cta.score }}%
                                    </span>
                                </div>
                                
                                <!-- Score Bar -->
                                <div class="progress mb-3" style="height: 8px;">
                                    <div class="progress-bar 
                                        {% if cta.score >= 70 %}bg-success
                                        {% elif cta.score >= 40 %}bg-warning
                                        {% else %}bg-danger{% endif %}" 
                                         style="width: {{ cta.score }}%"></div>
                                </div>
                                
                                <!-- Details -->
                                <div class="row text-center small">
                                    <div class="col-4">
                                        <div class="text-muted">Confidence</div>
                                        <div class="fw-semibold">{{ (cta.confidence_estimate * 100) | round(0) }}%</div>
                                    </div>
                                    <div class="col-4">
                                        <div class="text-muted">Area</div>
                                        <div class="fw-semibold">{{ cta.area_percentage }}%</div>
                                    </div>
                                    <div class="col-4">
                                        <div class="text-muted">Role</div>
                                        <div class="fw-semibold">{{ cta.goal_role }}</div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <i class="fas fa-search fa-3x text-muted mb-3"></i>
                            <p class="text-muted">No CTAs detected in this image</p>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- Summary Stats -->
            {% if data.results.ctas %}
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0 text-white">
                        <i class="fas fa-chart-bar me-2"></i>
                        Summary
                    </h5>
                </div>
                <div class="card-body">
                    {% set highest_score = data.results.ctas | map(attribute='score') | max %}
                    {% set average_score = (data.results.ctas | map(attribute='score') | sum / data.results.ctas | length) | round | int %}
                    {% set competing_elements = data.results.ctas | selectattr('score', '>=', 40) | list | length %}
                    
                    <div class="row g-3">
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">Highest Score:</span>
                                <span class="fw-bold text-success">{{ highest_score }}%</span>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">Average Score:</span>
                                <span class="fw-bold text-warning">{{ average_score }}%</span>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">Competing Elements:</span>
                                <span class="fw-bold text-info">{{ competing_elements }}</span>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">Total Elements:</span>
                                <span class="fw-bold text-light">{{ data.total_ctas }}</span>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <span class="text-muted">Conflict Level:</span>
                                <span class="fw-bold conflict-{{ data.results.competing_prompts.conflict_level }}">
                                    {{ data.results.competing_prompts.conflict_level.title() }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
/* Enhanced Results Page Styles */
.results-header {
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid var(--dark-surface-light);
    border-radius: 20px;
    padding: 2rem;
    backdrop-filter: blur(10px);
}

/* Competing Prompts Styles */
.competing-prompts-section {
    animation: slideInFromTop 0.6s ease-out;
}

.alert-competing {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1));
    border: 2px solid rgba(239, 68, 68, 0.3);
    border-radius: 16px;
    padding: 2rem;
    backdrop-filter: blur(10px);
}

.alert-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.alert-title {
    color: #fca5a5;
    font-size: 1.5rem;
    font-weight: 700;
    margin: 0;
}

.conflict-badge {
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.conflict-high {
    background: rgba(239, 68, 68, 0.2);
    color: #fca5a5;
    border: 1px solid rgba(239, 68, 68, 0.4);
}

.conflict-medium {
    background: rgba(251, 191, 36, 0.2);
    color: #fcd34d;
    border: 1px solid rgba(251, 191, 36, 0.4);
}

.conflict-low {
    background: rgba(34, 197, 94, 0.2);
    color: #86efac;
    border: 1px solid rgba(34, 197, 94, 0.4);
}

.alert-description {
    color: var(--text-light);
    font-size: 1.1rem;
    margin: 0;
    line-height: 1.6;
}

.conflicts-grid {
    display: grid;
    gap: 1rem;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.conflict-card {
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid var(--dark-surface-light);
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
}

.conflict-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: rgba(239, 68, 68, 0.5);
}

.conflict-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.conflict-type {
    font-weight: 600;
    color: var(--text-light);
    font-size: 0.95rem;
}

.severity-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.severity-high {
    background: rgba(239, 68, 68, 0.2);
    color: #fca5a5;
}

.severity-medium {
    background: rgba(251, 191, 36, 0.2);
    color: #fcd34d;
}

.conflict-description {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin: 0 0 1rem 0;
    line-height: 1.5;
}

.conflicting-ctas {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.cta-tag {
    background: rgba(37, 99, 235, 0.2);
    color: #93c5fd;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
    border: 1px solid rgba(37, 99, 235, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.cta-tag:hover {
    background: rgba(37, 99, 235, 0.3);
    color: var(--text-light);
    transform: scale(1.05);
}

.recommendations-section {
    background: rgba(37, 99, 235, 0.1);
    border: 1px solid rgba(37, 99, 235, 0.3);
    border-radius: 12px;
    padding: 1.5rem;
}

.recommendations-title {
    color: #93c5fd;
    font-weight: 600;
    margin: 0 0 1rem 0;
}

.recommendations-list {
    margin: 0;
    padding-left: 1.5rem;
    color: var(--text-light);
}

.recommendations-list li {
    margin-bottom: 0.5rem;
    line-height: 1.6;
}

.recommendations-list li:last-child {
    margin-bottom: 0;
}

/* Enhanced Conflict UI Styles */
.conflict-summary {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: rgba(30, 41, 59, 0.3);
    border-radius: 12px;
    border: 1px solid var(--dark-surface-light);
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1.5rem;
}

.summary-item {
    text-align: center;
}

.summary-number {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-light);
    margin-bottom: 0.5rem;
}

.summary-label {
    font-size: 0.9rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.section-title {
    color: var(--text-light);
    font-weight: 600;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid rgba(37, 99, 235, 0.3);
}

.issues-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.issue-card {
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid var(--dark-surface-light);
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
}

.issue-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: rgba(239, 68, 68, 0.5);
}

.issue-header {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 1rem;
}

.issue-icon {
    flex-shrink: 0;
    font-size: 1.5rem;
    margin-top: 0.25rem;
}

.issue-content {
    flex-grow: 1;
}

.issue-title {
    font-weight: 600;
    color: var(--text-light);
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
}

.issue-description {
    color: var(--text-muted);
    line-height: 1.5;
}

.severity-indicator {
    flex-shrink: 0;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.affected-ctas {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--dark-surface-light);
}

.ctas-label {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 0.75rem;
    font-weight: 500;
}

.ctas-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 0.75rem;
}

.cta-item {
    background: rgba(37, 99, 235, 0.1);
    border: 1px solid rgba(37, 99, 235, 0.3);
    border-radius: 8px;
    padding: 0.75rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.cta-item:hover {
    background: rgba(37, 99, 235, 0.2);
    transform: scale(1.02);
}

.cta-text {
    font-weight: 500;
    color: #93c5fd;
    margin-bottom: 0.25rem;
    font-size: 0.9rem;
}

.cta-score {
    font-size: 0.8rem;
    color: var(--text-muted);
}

.action-items {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.action-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid var(--dark-surface-light);
    border-radius: 12px;
    padding: 1rem 1.5rem;
    transition: all 0.3s ease;
}

.action-item:hover {
    background: rgba(30, 41, 59, 0.8);
    border-color: rgba(37, 99, 235, 0.5);
}

.action-item.enhanced {
    padding: 1.5rem;
}

.action-number {
    flex-shrink: 0;
    width: 2rem;
    height: 2rem;
    background: rgba(37, 99, 235, 0.2);
    color: #93c5fd;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9rem;
    margin-top: 0.25rem;
}

.action-content {
    flex-grow: 1;
}

.action-text {
    color: var(--text-light);
    line-height: 1.5;
    font-weight: 500;
    margin-bottom: 0.5rem;
}

.action-rationale, .action-implementation {
    color: var(--text-muted);
    font-size: 0.9rem;
    line-height: 1.4;
    margin-top: 0.5rem;
}

.action-rationale strong, .action-implementation strong {
    color: var(--text-light);
}

.action-priority {
    flex-shrink: 0;
    margin-top: 0.25rem;
}

.priority-high {
    background: rgba(239, 68, 68, 0.2);
    color: #fca5a5;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.priority-medium {
    background: rgba(251, 191, 36, 0.2);
    color: #fcd34d;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

.priority-low {
    background: rgba(34, 197, 94, 0.2);
    color: #86efac;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
}

/* Enhanced issue styling */
.issue-impact, .issue-conversion {
    color: var(--text-muted);
    font-size: 0.85rem;
    line-height: 1.4;
    margin-top: 0.5rem;
    padding: 0.5rem;
    background: rgba(37, 99, 235, 0.1);
    border-radius: 6px;
    border-left: 3px solid rgba(37, 99, 235, 0.3);
}

.issue-impact strong, .issue-conversion strong {
    color: var(--text-light);
}

/* Critical severity styling */
.severity-critical {
    background: rgba(220, 38, 38, 0.2);
    color: #fca5a5;
}

.no-conflicts-section {
    animation: slideInFromTop 0.6s ease-out;
}

.alert-success {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(21, 128, 61, 0.1));
    border: 2px solid rgba(34, 197, 94, 0.3);
    border-radius: 16px;
    padding: 2rem;
    backdrop-filter: blur(10px);
}

.success-header {
    margin-bottom: 1rem;
}

.success-title {
    color: #86efac;
    font-weight: 700;
    margin: 0;
}

.success-description {
    color: var(--text-muted);
    margin: 0;
    font-size: 1rem;
    line-height: 1.6;
}

/* Enhanced CTA Text Display */
.cta-info {
    flex: 1;
}

.extracted-text {
    margin-top: 0.5rem;
    font-size: 0.9rem;
}

.text-extracted {
    color: #93c5fd;
    font-weight: 500;
    font-style: italic;
}

.text-confidence {
    color: var(--text-muted);
    margin-left: 0.5rem;
}

/* Summary conflict indicators */
.conflict-high {
    color: #fca5a5 !important;
}

.conflict-medium {
    color: #fcd34d !important;
}

.conflict-low {
    color: #86efac !important;
}

/* Animations */
@keyframes slideInFromTop {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 1.5rem;
}

.results-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-light);
    margin: 0 0 1rem 0;
}

.results-meta {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.95rem;
}

.meta-item {
    display: flex;
    align-items: center;
}

.meta-divider {
    opacity: 0.5;
    margin: 0 0.25rem;
}

.header-actions {
    display: flex;
    gap: 0.75rem;
    flex-shrink: 0;
}

.desired-behavior-card {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(59, 130, 246, 0.1));
    border: 1px solid rgba(37, 99, 235, 0.3);
    border-radius: 16px;
    overflow: hidden;
}

.behavior-header {
    background: rgba(37, 99, 235, 0.2);
    padding: 1rem 1.5rem;
    border-bottom: 1px solid rgba(37, 99, 235, 0.3);
}

.behavior-title {
    margin: 0;
    font-weight: 600;
    color: var(--text-light);
    font-size: 1.1rem;
}

.behavior-content {
    padding: 1.5rem;
}

.behavior-text {
    margin: 0;
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-light);
    font-style: italic;
}

@media (max-width: 768px) {
    .results-header {
        padding: 1.5rem;
    }
    
    .header-content {
        flex-direction: column;
        align-items: stretch;
    }
    
    .header-actions {
        justify-content: center;
    }
    
    .results-meta {
        justify-content: center;
    }
    
    .results-title {
        text-align: center;
        font-size: 1.75rem;
    }
}
</style>
{% endblock %}
